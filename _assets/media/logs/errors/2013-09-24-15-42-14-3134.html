<font face="Arial" size="4" color="red">An error occurred at http://localhost:45240/importtest.ashx<br><font size="3">&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;INSERT&nbsp;statement&nbsp;conflicted&nbsp;with&nbsp;the&nbsp;FOREIGN&nbsp;KEY&nbsp;constraint&nbsp;"FK_CRM_SchoolKeystage_CRM_School".&nbsp;The&nbsp;conflict&nbsp;occurred&nbsp;in&nbsp;database&nbsp;"sevenstories",&nbsp;table&nbsp;"dbo.CRM_School",&nbsp;column&nbsp;'ID'.<BR>The&nbsp;statement&nbsp;has&nbsp;been&nbsp;terminated.</font></font><br><br><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td bgcolor="#666666" colspan="2"><font face="Arial" color="white"><b>&nbsp;Error Information</b></font></td></tr></table>
<table width="100%" bgcolor="#d1d9e4" cellspacing="1" cellpadding="3">
  <tr bgcolor="#d0d0d0"><td><font face="Arial" size="2">&nbsp;<b>Name</b></font></td>  <td><font face="Arial" size="2">&nbsp;<b>Value</b></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">Source</font></td>
<td><font face="Arial" size="2">.Net&nbsp;SqlClient&nbsp;Data&nbsp;Provider</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">Exception Type</font></td>
<td><font face="Arial" size="2">System.Data.SqlClient.SqlException</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">Message</font></td>
<td><font face="Arial" size="2">The&nbsp;INSERT&nbsp;statement&nbsp;conflicted&nbsp;with&nbsp;the&nbsp;FOREIGN&nbsp;KEY&nbsp;constraint&nbsp;"FK_CRM_SchoolKeystage_CRM_School".&nbsp;The&nbsp;conflict&nbsp;occurred&nbsp;in&nbsp;database&nbsp;"sevenstories",&nbsp;table&nbsp;"dbo.CRM_School",&nbsp;column&nbsp;'ID'.<BR>The&nbsp;statement&nbsp;has&nbsp;been&nbsp;terminated.</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">StackTrace</font></td>
<td><font face="Arial" size="2">&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlConnection.OnError(SqlException&nbsp;exception,&nbsp;Boolean&nbsp;breakConnection)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlInternalConnection.OnError(SqlException&nbsp;exception,&nbsp;Boolean&nbsp;breakConnection)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject&nbsp;stateObj)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.TdsParser.Run(RunBehavior&nbsp;runBehavior,&nbsp;SqlCommand&nbsp;cmdHandler,&nbsp;SqlDataReader&nbsp;dataStream,&nbsp;BulkCopySimpleResultSet&nbsp;bulkCopyHandler,&nbsp;TdsParserStateObject&nbsp;stateObj)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlDataReader.ConsumeMetaData()<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlDataReader.get_MetaData()<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader&nbsp;ds,&nbsp;RunBehavior&nbsp;runBehavior,&nbsp;String&nbsp;resetOptionsString)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior&nbsp;cmdBehavior,&nbsp;RunBehavior&nbsp;runBehavior,&nbsp;Boolean&nbsp;returnStream,&nbsp;Boolean&nbsp;async)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior&nbsp;cmdBehavior,&nbsp;RunBehavior&nbsp;runBehavior,&nbsp;Boolean&nbsp;returnStream,&nbsp;String&nbsp;method,&nbsp;DbAsyncResult&nbsp;result)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior&nbsp;cmdBehavior,&nbsp;RunBehavior&nbsp;runBehavior,&nbsp;Boolean&nbsp;returnStream,&nbsp;String&nbsp;method)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior&nbsp;behavior,&nbsp;String&nbsp;method)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior&nbsp;behavior)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Common.DbCommand.ExecuteReader()<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.SqlClient.SqlProvider.Execute(Expression&nbsp;query,&nbsp;QueryInfo&nbsp;queryInfo,&nbsp;IObjectReaderFactory&nbsp;factory,&nbsp;Object[]&nbsp;parentArgs,&nbsp;Object[]&nbsp;userArgs,&nbsp;ICompiledSubQuery[]&nbsp;subQueries,&nbsp;Object&nbsp;lastResult)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression&nbsp;query,&nbsp;QueryInfo[]&nbsp;queryInfos,&nbsp;IObjectReaderFactory&nbsp;factory,&nbsp;Object[]&nbsp;userArguments,&nbsp;ICompiledSubQuery[]&nbsp;subQueries)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression&nbsp;query)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject&nbsp;item)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject&nbsp;item)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode&nbsp;failureMode)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.DataContext.SubmitChanges(ConflictMode&nbsp;failureMode)<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Data.Linq.DataContext.SubmitChanges()<BR>&nbsp;&nbsp;&nbsp;at&nbsp;CRM.ImportTest.SchoolImport..ctor(MainDataContext&nbsp;db,&nbsp;String&nbsp;name,&nbsp;String&nbsp;address1,&nbsp;String&nbsp;address2,&nbsp;String&nbsp;address3,&nbsp;String&nbsp;postcode,&nbsp;String&nbsp;phone,&nbsp;String&nbsp;email,&nbsp;String&nbsp;lEA,&nbsp;String&nbsp;fs,&nbsp;String&nbsp;ks1,&nbsp;String&nbsp;ks2,&nbsp;String&nbsp;ks3,&nbsp;String&nbsp;ks4)&nbsp;in&nbsp;D:\coalface\7stories-2012-07-03\Trunk\CRM\ImportTest.ashx.cs:line&nbsp;154<BR>&nbsp;&nbsp;&nbsp;at&nbsp;CRM.ImportTest.ProcessRequest(HttpContext&nbsp;context)&nbsp;in&nbsp;D:\coalface\7stories-2012-07-03\Trunk\CRM\ImportTest.ashx.cs:line&nbsp;66<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()<BR>&nbsp;&nbsp;&nbsp;at&nbsp;System.Web.HttpApplication.ExecuteStep(IExecutionStep&nbsp;step,&nbsp;Boolean&amp;&nbsp;completedSynchronously)</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">TargetSite</font></td>
<td><font face="Arial" size="2">Void&nbsp;OnError(System.Data.SqlClient.SqlException,&nbsp;Boolean)</font></td></tr>
</table><BR><BR><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td bgcolor="#666666" colspan="2"><font face="Arial" color="white"><b>&nbsp;Cookies Collection</b></font></td></tr></table>
<table width="100%" bgcolor="#d1d9e4" cellspacing="1" cellpadding="3">
  <tr bgcolor="#d0d0d0"><td><font face="Arial" size="2">&nbsp;<b>Name</b></font></td>  <td><font face="Arial" size="2">&nbsp;<b>Value</b></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">__lc.visitor_id.1949661</font></td>
<td><font face="Arial" size="2">S1369987044.31b0ca615f</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">_jsuid</font></td>
<td><font face="Arial" size="2">3283848793</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">__atuvc</font></td>
<td><font face="Arial" size="2">0%7C33%2C3%7C34%2C0%7C35%2C0%7C36%2C9%7C37</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">ASP.NET_SessionId</font></td>
<td><font face="Arial" size="2">g3loszfazyjocs55wsvs3l55</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">admin</font></td>
<td><font face="Arial" size="2">authcode=e7b0c84d-19f6-413d-8605-b891d0425c18</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">7stories_query_status</font></td>
<td><font face="Arial" size="2">false</font></td></tr>
</table><BR><BR><table border="0" width="100%" cellpadding="1" cellspacing="0"><tr><td bgcolor="#666666" colspan="2"><font face="Arial" color="white"><b>&nbsp;Server Variables</b></font></td></tr></table>
<table width="100%" bgcolor="#d1d9e4" cellspacing="1" cellpadding="3">
  <tr bgcolor="#d0d0d0"><td><font face="Arial" size="2">&nbsp;<b>Name</b></font></td>  <td><font face="Arial" size="2">&nbsp;<b>Value</b></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">ALL_HTTP</font></td>
<td><font face="Arial" size="2">HTTP_CACHE_CONTROL:no-cache<BR>HTTP_CONNECTION:keep-alive<BR>HTTP_PRAGMA:no-cache<BR>HTTP_ACCEPT:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8<BR>HTTP_ACCEPT_ENCODING:gzip,deflate,sdch<BR>HTTP_ACCEPT_LANGUAGE:en-GB,en-US;q=0.8,en;q=0.6<BR>HTTP_COOKIE:__lc.visitor_id.1949661=S1369987044.31b0ca615f;&nbsp;_jsuid=3283848793;&nbsp;__atuvc=0%7C33%2C3%7C34%2C0%7C35%2C0%7C36%2C9%7C37;&nbsp;ASP.NET_SessionId=g3loszfazyjocs55wsvs3l55;&nbsp;admin=authcode=e7b0c84d-19f6-413d-8605-b891d0425c18;&nbsp;7stories_query_status=false<BR>HTTP_HOST:localhost:45240<BR>HTTP_USER_AGENT:Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/29.0.1547.76&nbsp;Safari/537.36<BR></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">ALL_RAW</font></td>
<td><font face="Arial" size="2">Cache-Control:&nbsp;no-cache<BR>Connection:&nbsp;keep-alive<BR>Pragma:&nbsp;no-cache<BR>Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8<BR>Accept-Encoding:&nbsp;gzip,deflate,sdch<BR>Accept-Language:&nbsp;en-GB,en-US;q=0.8,en;q=0.6<BR>Cookie:&nbsp;__lc.visitor_id.1949661=S1369987044.31b0ca615f;&nbsp;_jsuid=3283848793;&nbsp;__atuvc=0%7C33%2C3%7C34%2C0%7C35%2C0%7C36%2C9%7C37;&nbsp;ASP.NET_SessionId=g3loszfazyjocs55wsvs3l55;&nbsp;admin=authcode=e7b0c84d-19f6-413d-8605-b891d0425c18;&nbsp;7stories_query_status=false<BR>Host:&nbsp;localhost:45240<BR>User-Agent:&nbsp;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/29.0.1547.76&nbsp;Safari/537.36<BR></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">APPL_MD_PATH</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">APPL_PHYSICAL_PATH</font></td>
<td><font face="Arial" size="2">D:\coalface\7stories-2012-07-03\Trunk\CRM\</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">AUTH_TYPE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">AUTH_USER</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">AUTH_PASSWORD</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">LOGON_USER</font></td>
<td><font face="Arial" size="2">Ed-PC\Ed</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">REMOTE_USER</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">CERT_COOKIE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">CERT_FLAGS</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">CERT_ISSUER</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">CERT_KEYSIZE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">CERT_SECRETKEYSIZE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">CERT_SERIALNUMBER</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">CERT_SERVER_ISSUER</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">CERT_SERVER_SUBJECT</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">CERT_SUBJECT</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">CONTENT_LENGTH</font></td>
<td><font face="Arial" size="2">0</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">CONTENT_TYPE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">GATEWAY_INTERFACE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTPS</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">HTTPS_KEYSIZE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTPS_SECRETKEYSIZE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">HTTPS_SERVER_ISSUER</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTPS_SERVER_SUBJECT</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">INSTANCE_ID</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">INSTANCE_META_PATH</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">LOCAL_ADDR</font></td>
<td><font face="Arial" size="2">::1</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">PATH_INFO</font></td>
<td><font face="Arial" size="2">/importtest.ashx</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">PATH_TRANSLATED</font></td>
<td><font face="Arial" size="2">D:\coalface\7stories-2012-07-03\Trunk\CRM\importtest.ashx</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">QUERY_STRING</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">REMOTE_ADDR</font></td>
<td><font face="Arial" size="2">::1</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">REMOTE_HOST</font></td>
<td><font face="Arial" size="2">::1</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">REMOTE_PORT</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">REQUEST_METHOD</font></td>
<td><font face="Arial" size="2">GET</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">SCRIPT_NAME</font></td>
<td><font face="Arial" size="2">/importtest.ashx</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">SERVER_NAME</font></td>
<td><font face="Arial" size="2">localhost</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">SERVER_PORT</font></td>
<td><font face="Arial" size="2">45240</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">SERVER_PORT_SECURE</font></td>
<td><font face="Arial" size="2">0</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">SERVER_PROTOCOL</font></td>
<td><font face="Arial" size="2">HTTP/1.1</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">SERVER_SOFTWARE</font></td>
<td><font face="Arial" size="2"></font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">URL</font></td>
<td><font face="Arial" size="2">/importtest.ashx</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTP_CACHE_CONTROL</font></td>
<td><font face="Arial" size="2">no-cache</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">HTTP_CONNECTION</font></td>
<td><font face="Arial" size="2">keep-alive</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTP_PRAGMA</font></td>
<td><font face="Arial" size="2">no-cache</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">HTTP_ACCEPT</font></td>
<td><font face="Arial" size="2">text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTP_ACCEPT_ENCODING</font></td>
<td><font face="Arial" size="2">gzip,deflate,sdch</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">HTTP_ACCEPT_LANGUAGE</font></td>
<td><font face="Arial" size="2">en-GB,en-US;q=0.8,en;q=0.6</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTP_COOKIE</font></td>
<td><font face="Arial" size="2">__lc.visitor_id.1949661=S1369987044.31b0ca615f;&nbsp;_jsuid=3283848793;&nbsp;__atuvc=0%7C33%2C3%7C34%2C0%7C35%2C0%7C36%2C9%7C37;&nbsp;ASP.NET_SessionId=g3loszfazyjocs55wsvs3l55;&nbsp;admin=authcode=e7b0c84d-19f6-413d-8605-b891d0425c18;&nbsp;7stories_query_status=false</font></td></tr>
<tr valign="top" bgcolor="white"><td><font face="Arial" size="2">HTTP_HOST</font></td>
<td><font face="Arial" size="2">localhost:45240</font></td></tr>
<tr valign="top" bgcolor="#f4f4f4"><td><font face="Arial" size="2">HTTP_USER_AGENT</font></td>
<td><font face="Arial" size="2">Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1)&nbsp;AppleWebKit/537.36&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/29.0.1547.76&nbsp;Safari/537.36</font></td></tr>
</table>